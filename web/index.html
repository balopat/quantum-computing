<!DOCTYPE html>
<html>
<head>
  <title>Hello Web - Processing.js Test</title>
  <script src="/static/js/processing.js"></script>
  <script src="/static/js/jquery.js"></script>
  <script type="text/javascript">

       function drawPoints(id) {
         $("#complexplane")
          .attr('unselectable','on')
          .css({'-moz-user-select':'-moz-none',
                '-moz-user-select':'none',
                '-o-user-select':'none',
                '-khtml-user-select':'none', /* you could also put this in a class */
                '-webkit-user-select':'none',/* and add the CSS class here instead */
                '-ms-user-select':'none',
                'user-select':'none'
          }).bind('selectstart', function(){ return false; });
         var pjs = Processing.getInstanceById(id);
         console.log($("#r").val() + ", " + $("#i").val())
         a = pjs.getPoints().toArray()
         for (p in a) { a[p].$self = undefined }
         multiplicationRequest = {
           points: a,
           mulBy: {
             r: parseInt($("#r").val()),
             i: parseInt($("#i").val())
           }
         }
         console.log(multiplicationRequest)
         console.log(JSON.stringify(multiplicationRequest))
         $.ajax({
           url: "/complex",
           contentType: "application/json",
           method: "POST",
           data: JSON.stringify(multiplicationRequest),
           success: function(data) {
             console.log(data)
             var points = $.parseJSON(data);
             for (i in points) {
               pjs.addPoint(points[i].r, points[i].i);
             }
            }
          })
       }
       $(function() {

       })
       </script>
  <style type="text/css">
    body {
       -webkit-touch-callout: none;
       -webkit-user-select: none;
       -khtml-user-select: none;
       -moz-user-select: none;
       -ms-user-select: none;
       -o-user-select: none;
       user-select: none;
    }
  </style>
</head>
<body>
  <h1>The Complex Plane</h1>
  <p>Click on the canvas to display complex numbers as vectors! Multiplication of vectors is coming!</p>
  <canvas  id="complexplane" data-processing-sources="/static/complexplane/complexplane.pde"></canvas>
  <label>r</label> <input id="r" type="text" title="r">
  <label>i</label> <input id="i" type="text" title="i">
  <button type="button" id="loadPoints" onclick="drawPoints('complexplane')"> Multiply! </button>
</body>
</html>
